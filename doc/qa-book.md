# QA Book

This is the QA Book. (QA stands for quality assurance.) If you're reading this, you're probably our new QA tester. If so, welcome! If you're not a PhET employee, (1) thank you for reading this, (2) please let us know how you managed to find this obscure corner of GitHub, and (3) feel free to read on and learn how we test our simulations. Just about everything you need to know to test PhET simulations is in this book.

![Cover Comic](https://github.com/phetsims/QA/blob/master/doc/img/cover-comic.jpg "Funny Comic")

Thanks to Cornel Stefanache and Constantin Orasanu of MonkeyUser.com for their [humorous comic](https://www.monkeyuser.com/2018/the-struggle/) that Megan "PhETified."

***

## Contents

**[Section 1: Hardware & Software](https://github.com/phetsims/QA/blob/master/doc/qa-book.md#section-1-hardware--software)**

  * [1.1: Devices](https://github.com/phetsims/QA/blob/master/doc/qa-book.md#11-devices)
  * [1.2: Operating Systems](https://github.com/phetsims/QA/blob/master/doc/qa-book.md#12-operating-systems)
  * [1.3: Web Browsers](https://github.com/phetsims/QA/blob/master/doc/qa-book.md#13-web-browsers)
  * [1.4: Updates](https://github.com/phetsims/QA/blob/master/doc/qa-book.md#14-updates)

**[Section 2: Communication & Coordinization](https://github.com/phetsims/QA/blob/master/doc/qa-book.md#section-2-communication--coordinization)**

  * [2.1: Email](https://github.com/phetsims/QA/blob/master/doc/qa-book.md#21-email)
  * [2.2: Google Groups](https://github.com/phetsims/QA/blob/master/doc/qa-book.md#22-google-groups)
  * [2.3: Google Calendar](https://github.com/phetsims/QA/blob/master/doc/qa-book.md#23-google-calendar)
  * [2.4: Google Drive](https://github.com/phetsims/QA/blob/master/doc/qa-book.md#24-google-drive)
  * [2.5: Slack](https://github.com/phetsims/QA/blob/master/doc/qa-book.md#25-slack)
  * [2.6: Zoom](https://github.com/phetsims/QA/blob/master/doc/qa-book.md#26-zoom)

**[Section 3: GitHub](https://github.com/phetsims/QA/blob/master/doc/qa-book.md#section-3-github)**

  * [3.1: Repositories](https://github.com/phetsims/QA/blob/master/doc/qa-book.md#31-repositories)
  * [3.2: Terminology](https://github.com/phetsims/QA/blob/master/doc/qa-book.md#32-terminology)
  * [3.3: Issues](https://github.com/phetsims/QA/blob/master/doc/qa-book.md#33-issues)

**[Section 4: Testing](https://github.com/phetsims/QA/blob/master/doc/qa-book.md#section-4-testing)**

  * [4.1: Development (Dev) Testing](https://github.com/phetsims/QA/blob/master/doc/qa-book.md#41-development-dev-testing)
  * [4.2: Release Candidate (RC) Testing](https://github.com/phetsims/QA/blob/master/doc/qa-book.md#42-release-candidate-rc-testing)
  * [4.3: PhET-iO Testing](https://github.com/phetsims/QA/blob/master/doc/qa-book.md#43-phet-io-testing)
  * [4.4: Accessibility (a11y) Testing](https://github.com/phetsims/QA/blob/master/doc/qa-book.md#44-accessibility-a11y-testing)
  * [4.5: Online Website Testing](https://github.com/phetsims/QA/blob/master/doc/qa-book.md#45-online-website-testing)
  * [4.6: Offline Website (Installer) Testing](https://github.com/phetsims/QA/blob/master/doc/qa-book.md#46-offline-website-installer-testing)
  * [4.7: Automated (Continuous) Testing](https://github.com/phetsims/QA/blob/master/doc/qa-book.md#47-automated-continuous-testing)
  * [4.8: Memory Leak Testing](https://github.com/phetsims/QA/blob/master/doc/qa-book.md#48-memory-leak-testing)

**[Section 5: Translations](https://github.com/phetsims/QA/blob/master/doc/qa-book.md#section-5-translations)**

  * [5.1: Legacy Simulation Translations](https://github.com/phetsims/QA/blob/master/doc/qa-book.md#51-legacy-simulation-translations)
  * [5.2: HTML5 Simulation Translations](https://github.com/phetsims/QA/blob/master/doc/qa-book.md#52-html5-simulation-translations)
  * [5.3: Website Translations](https://github.com/phetsims/QA/blob/master/doc/qa-book.md#53-website-translations)

**[Section 6: Maintenance & Management](https://github.com/phetsims/QA/blob/master/doc/qa-book.md#section-6-maintenance--management)**

  * [6.1: Testing Matrix Management](https://github.com/phetsims/QA/blob/master/doc/qa-book.md#61-testing-matrix-management)
  * [6.2: PhET Test Maintenance](https://github.com/phetsims/QA/blob/master/doc/qa-book.md#62-phet-test-maintenance)
  * [6.3: Website Administration](https://github.com/phetsims/QA/blob/master/doc/qa-book.md#63-website-administration)
  * [6.4: QA Book Maintenance](https://github.com/phetsims/QA/blob/master/doc/qa-book.md#64-qa-book-maintenance)

***

## Section 1: Hardware & Software

We like to make sure our sims work on most hardware and most software.

### 1.1: Devices

Check out the [Asset Inventory](https://docs.google.com/spreadsheets/d/1XqnlW8DAlt2fZHDfDgkTMmMLpJZ1c0equBaPdkn2V08/edit#gid=0) for a comprehensive list of the devices we own. The "QA Simplified Inventory" is a list of the devices in Ariel's office (F925).

### 1.2: Operating Systems

For a comprehensive list of operating systems we support, check out the [the PhET Help Center](https://phet.colorado.edu/en/help-center/running-sims). (Open the "What are the System Requirements for running PhET simulations?" details.)

### 1.3: Web Browsers

For a comprehensive list of browsers we support, check out the [the PhET Help Center](https://phet.colorado.edu/en/help-center/running-sims). (Open the "What are the System Requirements for running PhET simulations?" details.)


### 1.4: Updates

Never update a testing device unless the QA team lead asks you to do so.

***

## Section 2: Communication & Coordinization

We try to communicate and coordinate effictively at PhET.

### 2.1: Email

Be sure to check your email frequently as PhET employees often communicate their schedules via email. You'll also recieve GitHub notifications via email.

### 2.2: Google Groups

You should be part of the "PhET Team" Google Group.

### 2.3: Google Calendar

Make sure your availability is accurately reflected in the "PhET Student Employees/Researchers" Google Calendar.

### 2.4: Google Drive

We put all sorts of stuff that you'll need to use on Google Drive. You can post videos that you want to use in your issues to Google Drive.

### 2.5: Slack

If you're working, you should be on Slack! Please bother the developers with silly gifs. To do so, type `/giphy hello`. (Replace "hello" with whatever you want a gif of.)

### 2.6: Zoom

We occasionally use Zoom to video conference.

***

## Section 3: GitHub

GitHub is a code hosting website. If GitHub is integrated with Git, everything you commit and push is automatically posted. PhET also uses GitHub to document issues with sims.

### 3.1: Repositories

A GitHub repository is like a folder where the code and issues for a specific simulation are kept. It’s important that you familiarize yourself with each repository and its contents.

Some repositories contain code for things that aren’t simulations. The following is a list of those repositories with brief descriptions:

* a11y-research: Accessibility Research is dedicated to keeping track of accessibility research.
* aqua: Automated Quality Assurance (AQuA) holds code for continuous testing. PhETTest uses some code in aqua.
* assert: Assert holds code for handling assertions.
* axon: Axon is sort of like the nerve system. Axon holds code for things related to properties, e.g. the value of a speedometer.
* babel: Babel holds files of translated strings for HTML5 simulations.
* blast: Blast holds code for a simple simulation. This simulation only uses code from axon, joist, and scenery. Blast is used to diagnose issues.
* brand: Brand holds assets for each of the three brands. The brands are 1) PhET, 2) PhET-iO, and 3) Adapted from PhET.
* bumper: Bumper holds code for a simulation that is used to test deployment procedures.
* chains: Chains holds code for a simulation that is used to test string translation tools.
* chipper: Chipper holds code for tools used to develop and build simulations.
* dot: Dot is a mathematics library.
* example-sim: Example Simulation holds code for an example simulation. It is used to show interns and new employees how the simulations are structured.
* griddle: Griddle is a charting library.
* joist: Joist holds code for the “framework” of simulations, e.g. the splash screen, home screen, navi- gation bar, about dialog, etc.
* kite: Kite is a library for 2D shapes.
* mobius: Mobius is a library for 3D shapes.
* nitroglycerin: Nitroglycerin holds code for chemistry-related things.
* perennial: Perennial holds, among other things, build server code. It also holds utilities for doing the build.
* phet-core: PhET Core holds code for utilities used by all simulations.
* phet-info: PhET Information is mostly documentation.
* phetcommon: PhET Common contains general purpose common code.
* phetmarks: PhET Marks holds a simulation that contains code that developers use to bookmark URLs.
* phet-office-mix: PhET Office Mix holds Microsoft Office 365 things. Collaboration with Microsoft to make PhET simulations compatible Microsoft Office applications.
* query-string-machine: Query String Machine holds code that parses query parameters.
* rosetta: Rosetta holds code for the translation of HTML5 simulations.
* scenery-phet: Scenery PhET holds components based on Scenery that are specific to PhET simulations.
* scenery: Scenery is the scene graph library that is used to create all visual aspects of PhET simulations.
* sherpa: Sherpa holds third party libraries.
* shred: Shred holds code used in simulations with subatomic particles.
* simula-rasa: Simula Rasa holds code for a blank simulation.
* sun: Sun holds code for low level user interface components, e.g. buttons and sliders. It uses code from Scenery.
* tambo: Tambo holds code for sonification.
* tandem: Tandem holds code for supporting material for PhET-iO simulations. Used in conjunction with PhET-iO to enable access to model and user interface components of the simulation.
* tasks: Tasks is a list of tasks.
* twixt: Twixt is an animation library.
* vegas: Vegas holds code for the components used in games.
* vibe: Vibe holds code for handling audio in simulations.
* webgl-ripples: WebGL Ripples holds code for 2D waves.
* website-meteor: Website Meteor holds code for the Meteor-React upgrade of the PhET website.

### 3.2: Terminology

It is important to familiarize yourself with the correct terminology for the various things you will encounter in a simulation. The words in quotation marks are the explanatory terms, and the words without quotation marks are the correct terms. (Some terms are intuitive while others are counterintuitive, hence the list.)

* “tab” = screen
* “loading screen” = splash screen
* “picture of the simulation that directs you to the simulation when clicked” = screen icon
* “screen that loads after the splash screen and has screen icons” = home screen
* “screen icon that exists in the home screen” = home screen icon
* “bar that has screen icons” = navigation bar
* “screen icon that exists in the navigation bar” = navigation bar icon
* “PhET logo that opens a menu when clicked” = PhET menu
* “box in which items that can be dragged and interacted with are stored” = toolbox
* “item that exists in a toolbox” = tool
* “button that resets everything in the simulation” = reset all button
* “button that resets some things in the simulation” = reset button
* “button in a browser that reloads the page” = refresh button
* “button with a right pointing triangle” = play button
* “button with two bars” = pause button
* “button with a bar and a right pointing triangle” = step forward button
* “button with a square” = stop button
* “boxed off area that contains information” = panel
* “red button with minus sign” = collapse button
* “green button with plus sign” = expand button
* “panel with a collapse and expand button” = accordion panel
* “circular button that can be blank or solid” = radio button
* “box in which a check mark can exist” = checkbox
* “bar with button that can be dragged up and down xor left and right” = slider
* “slider button” = thumb
* navigation bar icon != home screen icon
* refresh button != reset button != reset all button
* “pop-up information” = dialogue
* “X button in dialogue” = close button
* “drop down menu” = combo box
* “number adjuster that looks like a spinner” = number picker

![Number Picker](https://github.com/phetsims/QA/blob/master/doc/img/number-picker.png "Number Picker")

* “number adjuster that looks like a picker” = number spinner

![Number Spinner](https://github.com/phetsims/QA/blob/master/doc/img/number-spinner.png "Number Spinner")

* “slightly different simulation within a screen” = scene
* “toolbox that has multiple pages” = carousel
* “different pages in carousel” = pages
* “dots that exist under a carousel” = dots
* “using the dots to navigate between pages” = dot navigation
* “clicking and holding” = fire on hold

Check out the [Scenery-PhET demo](http://phettest.colorado.edu/scenery-phet/scenery-phet_en.html?brand=phet&ea) and the [Sun demo](http://phettest.colorado.edu/sun/sun_en.html?brand=phet&ea) for more terminology.

### 3.3: Issues

Most of the issues you’ll create on GitHub will be bug reports. Creating a bug report or general issue is easy. Here are the steps you need to follow:

1. Before you even think about creating a new issue, comb through existing issues to see if someone already created the issue. Search all repositories on GitHub for the issue.
2. If someone has created a similar issue, consider commenting in that issue instead of creating a new issue.
3. Otherwise, go to the appropriate repository.
4. Click on the “Issues” tab.
5. Click on the “New Issue” button.
6. If the issue is a bug report for a simulation, use the template below.
7. If the issue is a general issue, simply describe the issue thoroughly and concisely.
8. Assign the appropriate PhET employee(s) and use relevant labels. This is often the developer who made the test issue. Design questions go to Amy if they are science, or Amanda if they are math.
9. Click the “Submit New Issue” button.

#### Issue Template

```
<b>Test Device</b>

blah

<b>Operating System</b>

blah

<b>Browser</b>

blah

<b>Problem Description</b>

blah

<b>Steps to Reproduce</b>

blah

<b>Visuals</b>

blah

<details>
<summary><b>Troubleshooting Information</b></summary>

blah

</details>
```

* Always remember to link the QA issue!
* It is courteous to use screenshots or gifs in the “Visuals” section of the bug report. For Windows,
[ScreenToGif](https://www.screentogif.com/) is recommended. For macOS, [Kap](https://getkap.co/) is recommended.
* The troubleshooting information for a simulation comes from the “Report a Problem” link in the
simulation.
* If your issue is related to another issue, link the related issue.

#### A List of Labels and Their Descriptions

* design:a11y - For issues with the design of accessibility-related features, e.g. keyboard navigation, sonification, etc.
* design:artwork - For issues with the design of artwork.
* design:general - For general design issues.
* design:phet-io - For issues with PhET-iO simulations.
* dev:a11y - For issues related to accessibility development.
* dev:enhancement - For issues related to development improvements.
* dev:phet-io - For PhET-iO development issues.
* dev:sonification - For issues related to sound.
* phet-io:event-stream - For issues related to event wrappers in PhET-iO simulations.
* phet-io:studio - For issues related to studio in PhET-iO branded sims.
* phet-io:record-and-playback - For issues relating to record and playback in PhET-iO simulations.
* phet-io:save-and-load - For issues related to state wrappers and launching from proxies in PhET-iO branded simulations.
* type:automated-testing - For automated testing issues.
* type:bug - For bugs.
* type:duplicate - For duplicate issues.
* type:i18n - For issues related to internalization.
* type:legacy-bug - For issues that also exist in Java or Flash sims.
* type:multitouch - For issues that require multiple inputs.
* type:performance - For performance issues, e.g. low frame rate, lag, etc.
* type:question - For questions.

***

## Section 4: Testing

If it ain't broke, break it! 

### 4.1: Development (Dev) Testing

Development testing is whatever the developer wants it to be. Generally speaking, a development test entails making sure the simulation behaves as intended. The GitHub issue for a development test will specify what needs to be tested.

When a simulation needs to be tested, a developer will open an issue in the QA repository and they should use [the template for development tests](https://github.com/phetsims/QA/blob/master/issue-templates/dev-test-template.md). The template should specify what exactly needs to be tested. The steps you need to follow and the platforms you need to test for a development test can be found in the template. There should be a link to the simulation in the issue, but if there isn’t, then you can find it [here](https://phet-dev.colorado.edu/html/).

Here's a list of platforms we like to do development tests on:

* macOS + Safari
* macOS + Firefox
* macOS + Chrome
* Windows + Microsoft Edge
* Windows + Firefox
* Windows + Chrome
* iOS + Safari
* Chrome OS

Something to note about sims using webGL.  WebGL may not run on certain platforms and browsers, such as chrome on lower Mac OS.

### 4.2: Release Candidate (RC) Testing ###

Release candidate testing is more thorough than development testing because the simulation being tested is a “release candidate.” Theoretically, major issues with the simulation will have been fixed by the time it undergoes an RC test.

When a simulation needs to be tested, a developer will open an issue in the QA repository and they should use [the new template for release candidate tests](https://github.com/phetsims/QA/blob/master/issue-templates/rc-test-template.md). There should be a link to the simulation in the issue, but if there isn’t, then you can find it [here](https://phet-dev.colorado.edu/html/). The template should specify what exactly needs to be tested. Here are the steps you need to follow for a release candidate test:

1. Familiarize yourself with the simulation.
2. If the developer wants you to test previous issues, then test those first.
3. Open the testing matrix.
4. Choose a device and browser combination that hasn’t been tested. Add your initials to indicate that you are testing that platform.
5. Perform the below tests and fill out the testing matrix.
6. When you find an issue, see if it was in a previously published version (if it exsists)

#### Full Screen Test

To do the full screen test, do the following:

1. In the PhET menu, there is a “Full Screen” button. Press that button.
2. Make sure the simulation goes into and out of full screen mode easily.
3. Make sure the simulation does not change when the simulation goes into and out of full screen mode.

#### Screenshot Test

To do the screenshot test, do the following:

1. In the PhET menu, there is a “Screenshot” button. Press that button.
2. Make sure the screenshot is exactly the same as the simulation.

#### Query Parameters Test

To do the query parameters test, append the URL with the following query parameters:

* `?showPointerAreas`: shows red touch area and blue mouse area
    * Some things won’t have a pointer area. This is normal.
    * Sometimes pointer areas will look strange, e.g. extending beyond the borders of a carousel. This is normal.
    * Make sure pointer areas do not overlap.
    * This query parameter adversely affects the performance of the simulation.
* `?stringTest=double`: doubles strings
    * Strings should scale down. Nothing should overlap.
    * If there is an issue, then it is an internationalization issue.
* `?stringTest=long`: makes strings 12345678901234567890123456789012345678901234567890
    * Make sure there aren't any layout issues.
    * This query parameter might reveal issues that ?stringTest=double doesn’t.
* `?stringTest=rtl`: makes strings Farsi
    * Make sure everything looks good.
    * Make sure everything functions normally.
* `?stringTest=X`: makes strings X
* `?stringTest=xss`: cross site scripting
    * This query parameter puts JavaScript into every string. The page should not redirect.
    * If the simulation does not redirect to another website, the simulation passes this test.
    * If the simulation crashes or fails to load, the simulation still passes this test.
    
##### Other Usefull Query Parameters #####
* `?fuzz`: makes random clicks and touches
* `?profiler`: Shows frame rate of the sim

##### Private Query Parameters #####
Some Query Parameters may only be used by members of the PhET team. The method of viewing them SHOULD NOT be disclosed. [This](https://github.com/phetsims/special-ops/issues/129#issuecomment-470688353) private issue details the method for making these parameters visible.

Multiple query parameters can be used at once. It's as simple as adding an ampersand between query parameters.

##### Syntax for Multiple Query Parameters

`?queryParameter1&queryParameter2&queryParameter3`

#### Legends of Learning Test

To test a simulation in the Legends of Learning harness, do the following:

1. Go to https://developers.legendsoflearning.com/public-harness/index.html.
2. Copy and paste the simulation’s URL into “Enter Game Source URL.”
3. Append the URL of the simulation with `?legendsOfLearning`.
4. Make sure you can pause the simulation.
5. Make sure you can resume the simulation.

#### HTML Download Test

To perform the HTML download test, do the following:

1. On an iOS device, open the simulation and add it to your “Reading List.”
2. Disconnect from the internet.
3. Open the simulation and make sure it behaves normally.
4. On a device with Google Chrome installed, save the simulation by right clicking on the link to the simulation in https://phet-dev.colorado.edu/html/.
5. Disconnect from the internet.
6. Open the simulation and make sure it behaves normally.

#### iFrame Test & XHTML Test

To perform the iFrame test or the XHTML test, simply click the link to the iFrame or the link to the XHTML version of the simulation and make sure the simulation behaves normally.

#### Debug Version

It is a good idea to have the debug version of the rc found [here](https://phet-dev.colorado.edu/html/) running with the querry parameter fuzzMouse enabled.

#### Screenshots

##### Screenshots on Chrome

1. Download Window Resizer.
2. Download Screenshot Capture.
3. Window Resizer -> preset 1536x1008.  Screenshot Capture -> Adjust to actual size preset.
4. Resize viewport.
5. Right click Screenshot Capture icon -> options -> make sure capture method is set to capture viewport.
6. Set up as close as possible the desired screenshot.
7. Double check that there are enough pixels. Extension should give a warning if it cannot resize properly.
8. Press `alt + s` (this is the default keyboard shortcut) to take the screenshot.  (Tip: make sure the download bar from any previous screenshots is gone.)
9. Check the image to make sure it has the right dimensions (1536x1008).
10. Rename screenshots `sim-name-screenshot.png` or `sim-name-screenshot-alt#.png`.
11. Upload screenshots to GitHub.

##### Screenshots on Firefox

1. Download ResizeIT.
2. Download Easy Screenshot.
3. ResizeIT -> set dimension to 1548x1089 (maybe?)
4. Set up screenshot.
5. Double check that there are enough pixels. Extension should give a warning if it cannot resize properly.
6. Click on the screenshot extension. (Tip: make sure the download bar from any previous screenshots is gone.)
7. Select capture visible web content.
8. Save the screenshot.
9. Double check dimensions. Dimensions should be (1536x1008).
10. Rename screenshots `sim-name-screenshot.png` or `sim-name-screenshot-alt#.png`.
11. Upload screenshots to GitHub.

### 4.3: PhET-iO Testing

PhET-iO simulations are licensed versions of PhET simulations. PhET-iO simulations are not available to the general public. We charge customers for these simulations because they are highly customizable. When a customer pays for a PhET-iO simulation, they are provided with the password for the simulation as well as an application program interface (API) that they can use to customize the simulation. In the PhET-iO issue, there will be, among other things, a link to a root directory or wrapper index and a link to a testing matrix. The root directory contains all of the wrappers, i.e. environments, in which the simulation will be tested. The testing matrix is where we document what has been tested and by whom. There should be a link to the simulation in the issue, but if there isn’t, then you can find it [here](https://phet-dev.colorado.edu/html/). Here are the steps you need to follow for a PhET-iO test:

1. Open a private tab.
2. Click the link to the wrapper index.
3. Enter the username and password.
4. Familiarize yourself with the simulation.
5. Open the testing matrix.
6. Choose a device and browser combination that hasn’t been tested.
7. Perform the below tests and fill out the testing matrix accordingly.

Before reading about the various tests you’ll perform on a PhET-iO simulation, it should be noted that PhET-iO testing can be daunting. It will help if you learn what a tandem ID is. You will no doubt encounter them. A tandem ID is an identifier for a particular behavior of the simulation. For example, you could encounter the following tandem ID while testing the studio wrapper.

`faradaysLaw.faradaysLawScreen.model.magnet.positionProperty`

The above tandem ID tells you the following: (1) the simulation is Faraday’s Law, (2) the behavior the tandem ID refers to occurs in the Faraday’s Law screen, (3) model indicates that something is being modeled according to some set of rules, (4) magnet indicates that the magnet is what is being modeled, and (5) positionProperty states the current position of the magnet. For a more comprehensive treatment of tandem IDs, read [this](https://docs.google.com/document/d/1Fr-B66SD-6Xt7egNv9ZeSXdcsK6k8Lkc0nqR853_eJ4/edit?pli=1#heading=h.oz7vdnbiq4ni).

The wrapper index is password protected! The Simulation, Events:colorized, and Events:json are not password protected.

#### Wrapper Index Test

In the Wrapper Index there should be some example code. Copy and paste it into a text editor, save it, and make sure the resulting html file runs properly.

#### Simulation Wrapper Test

* *What?* This wrapper is the simulation.
* *How?* To test this wrapper, follow the steps for a development test or a release candidate test depending on
what the issue specifies.

#### Studio Wrapper Test

* *What?* This wrapper is the simulation alongside a long list of instrumented characteristics. An instrumented characteristic is some aspect of the simulation that can be modified by a licensed owner of a PhET-iO simulation, e.g. a property. Not all characteristics of the simulation are instrumented so as to retain the functionality of the simulation.
* *How?* To test this wrapper, make sure instrumented characteristics can be modified and make sure charac- teristics that haven’t been instrumented can’t be modified. Also, do the following:
  1. Periodically launch the simulation to make sure it works using the “Launch” button.
  2. Periodically copy and paste the HTML into a text editor, save the file, and open it in a browser to make sure the modifications you made are still there using the “Generate HTML” button.

#### Events: Colorized Wrapper Test

* *What?* This wrapper is the simulation, but when you open the console, you are able to view a colorized event stream.
* *How?* To test this wrapper, manipulate the simulation and make sure the events you see in the event stream match the manipulations.

#### Events: JSON Wrapper Test

* *What?* This wrapper is the simulation, but when you open the console, you are able to view the event stream in JavaScript object notation.
* *How?* To test this wrapper, manipulate the simulation and make sure the events you see in the event stream match the manipulations.

#### Events: Text Area Wrapper Test

* *What?* This wrapper is the simulation with the event stream below. There is a limit to the number of events that can be displayed below the simulation.
* *How?* To test this wrapper, manipulate the simulation and make sure the events you see in the event stream match the manipulations.

#### Events: Recording Wrapper Test

* *What?* This wrapper allows you to record your actions in the simulation.
* *How?* To test this wrapper, do the following:
  1. In the URL, replace `&console` with `&localFile`. (If `&console` doesn’t exist, then you should still add `&localFile`.)
  2. Record your actions in the simulation. (Remember what you did.)
  3. Open the console.
  4. Follow the directions in the console to download a copy of the recording.
  5. View the recording in the Events: Playback wrapper and make sure your actions were recorded accurately.
  6. If a previous recording wrapper exists and is provided, make a recording in that wrapper and test with the current playback method.
  
#### Metacog Recording Testing
  
* *What?* This test exercises the full recording and playback process used for PhET studies. This includes recording data to and retrieving data from our data back end partner, Metacog.
* *How?* First, make the recording using the link provided. Check that you are recording to metacog by looking in the console. You should see the following: `Recorder initialized, sending data to: ["metacog"]`. When you are done, press either the back arrow or close the tab. You should be prompted to stay while the process finishes. DO NOT LEAVE! Instead, press cancel and wait for the go-ahead to leave. (Note: Firefox may not show the dialog if you use the back arrow.) Wait for thirty minutes before moving to the next step. Use this [link](http://phettest.colorado.edu/phet-io-website/root/metacog/request-data.html) to retrieve the data. Paste the provided URL into the URL box, the ID into the Application ID (this will not be given in the issue, but you can ask the developer for it), and the email you want to receive the logs in into the email box. Nothing else needs to be entered. If you have the console open when you hit submit you will get an ID number you can use if something goes wrong with the retrieval. The email will take about 20 minutes. Make sure the `.gz` file is uncompressed. Use the playback link in the wrapper index to test the recording. [This](https://github.com/phetsims/phet-io/blob/master/doc/metacog.md) may be helpful.

#### State Wrapper Test

* *What?* This is a wrapper that contains a simulation, a mirror of the simulation that is updated once every second, and a condensed list of instrumented characteristics.
* *How?* To test this wrapper, simply play with the simulation and make sure your actions are mirrored accurately.

#### Mirror Inputs Wrapper Test

* *What?* This is a wrapper that contains a simulation and a mirror of the simulation that is updated with every user input.
* *How?* To test this wrapper, make sure your actions are mirrored accurately. Spend plenty of time testing this wrapper.

#### Screenshot Wrapper Test

* *What?* This is a wrapper in which you can take a screenshot of the simulation.
* *How?* To test this wrapper, test screenshots as you normally would by pressing the “Take Screenshot”
button in the wrapper, not the “Screenshot” button in the simulation.

#### Active Wrapper Test

* *What?* This is a wrapper that allows you to toggle between an active simulation and an inactive simulation.
* *How?* To test this wrapper, simply make sure you can interact with the simulation when it is active and
cannot interact with the simulation when it is inactive. Animations should resume without “jumping.”

### 4.4: Accessibility (a11y) Testing

One of PhET’s goals is to make our simulations available to everyone. This, of course, includes people with disabilities. There are three features to unique to accessibility testing: keyboard navigation compatibility, screen reader compatibility, and sound effects (sonification). Keyboard navigation compatibility allows the user to play with the simulation using the keyboard, i.e. they don’t have to use the mouse. Keyboard navigation can be tested on any device with a physical keyboard and in any browser. Screen reader compatibility allows the user to hear a description of what is happening in the simulation. On Windows devices, we test the NVDA and JAWS screen readers. On macOS devices, we test the VoiceOver screen reader, which is installed by default. JAWS is tested on Chrome, NVDA is tested on Firefox, and VoiceOver is tested on Safari. To familiarize yourself with a screen reader, use the screen reader to read [this](https://bayes.colorado.edu/dev/html/jg-tests/reader-intro.html). In an issue for a test of a simulation with accessibility feature(s) you will find, among other things, a link to the simulation, perhaps a link to a testing matrix (if the test is an RC test), and a link to the a11y view. The a11y view, is a page with the simulation on the left and the description of the simulation in plain text (the parallel document object model or PDOM) on the right. Below the simulation are real-time alerts that will be announced by the screen reader.

Please read through this [list of known a11y bugs](https://drive.google.com/open?id=12kTs-g-iKEIH1dyG7Q41_W_oNL4gUKbkW-IQgZjMUBw) before doing any testing.

To test the accessibility features of a simulation, follow the steps below:
1. Start the screen reader before you open a browser.
2. Familiarize yourself with the simulation.
3. If the developer wants you to test previous issues, then test those first.
4. Perform the below tests.

#### Keyboard Navigation Test

To test keyboard navigation, make sure keyboard navigation functions as described in the “Keyboard Shortcuts” dialogue.

#### Screen Reader Test

To test a screen reader, do the following:

1. Make sure you know how to use screen readers. (If you don't, ask Katie.)
2. Carefully read the a11y view.
3. Quit your browser.
4. Start your screen reader.
5. Make sure "audio ducking" is off in screen reader settings.
6. Open the sim.
7. Read everything in the simulation with the screen reader.
8. Make sure all possible alerts are given.
9. Make sure all possible descriptions match the state of the simulation.
10. Make sure the alerts and descriptions make sense.

#### Sound Test

To test sound in a simulation, make sure the sound effects work and sound good on all platforms.

### 4.5: Online Website Testing

The developers may occasionally ask you to test various parts of the website. They should provide details. Theoretically, all of the steps you follow to test the offline website could be followed for the online website. (Obviously, some things would be different, as the website would be online instead of offline.) The [section on website administration](https://github.com/phetsims/QA/blob/master/doc/qa-book.md#63-website-administration) may contain pertinent information.

### 4.6: Offline Website (Installer) Testing

The The offline website installers are (typically) built every Sunday morning. Test the offline website every Monday. To test the offline website, follow the steps below:

1. Go to whichever of the following links is appropriate for the test being done.
  * https://phet.colorado.edu/installer/PhET-Installer_windows.exe
  * https://phet.colorado.edu/installer/PhET-Installer_osx.zip
  * https://phet.colorado.edu/installer/PhET-Installer_linux.bin
  * https://phet.colorado.edu/installer/PhET-Installer-with-activities_windows.exe
  * https://phet.colorado.edu/installer/PhET-Installer-with-activities_osx.zip
  * https://phet.colorado.edu/installer/PhET-Installer-with-activities_linux.bin
  * https://phet.colorado.edu/installer/PhET-Installer_cdrom.zip
  * https://phet.colorado.edu/installer/PhET-Installer_dvdrom.zip
2. Make sure the date on which the installer was built is correct, e.g. if you’re testing the simulation on a Monday, and the installer builder was built on Sunday morning, then the date should be Monday’s date minus one day.
3. If this is not the case, then stop testing and inform the developer.
4. Otherwise, make sure the file sizes aren’t too large or too small. As of 2018-03-23, the installer without activities is approximately 370 MB and the installer with activities is approximately 1300 MB. If these numbers are drastically different, then stop testing and inform the developer.
  * You should alternate between Windows and macOS on a weekly basis.
  * You should alternate between browsers on a weekly basis.
  * You should alternate between the installer without activities and the installer with activities on a weekly basis. That is, you should not test both in one week.
  * If you download the installer with activities, index.html should exist in the `PhET` folder and in the `en` folder.
  * If you download the installer without activities, index.html should exist in the `PhET` folder and not in the `en` folder.
  * If you are testing the website while disconnected from the internet, the offline website should not be trying to connect to the internet. (There are some exceptions to this.)
  * You should have one offline website for every month of the year.
  * If you want to get rid of an offline website, delete it. Do not use the uninstaller.
5. Download the installer builder. (This is why it’s called installer testing.)
6. Install the offline website. During installation, append the file name with `_YYYY-MM-DD` (the [correct numeric date format](https://xkcd.com/1179/)).
7. Open the offline website every way you can. (On a Windows device, the installer will create a desktop shortcut and an application shortcut. This does not occur on macOS.)
8. Make sure the update date on the offline website matches the update date on the online website.
9. If this is not the case, then stop testing and inform the developer.
10. Otherwise, disconnect from the internet and test applicable items in the below list. (Translated Java simulations will redirect to the website.)
  * For all versions of the installer, make sure two HTML5 simulations open.
  * For all versions of the installer, make sure two translated HTML5 simulations open.
  * For all versions of the installer, make sure two Flash simulations open.
  * For all versions of the installer, make sure two Java sims open.
  * For all versions of the installer, make sure two translated Flash sims open.
  * For all versions of the installer, make sure two translated Java sims direct to the website if you are connected to the internet.
  * For the installer without activities, make sure that activity links redirect you to the website if you are connected to the internet.
  * For the installer with activities, make sure two activities open.
  * For the installer with activities, make sure two translated activities open.
  * For the installer with activities, make sure one teacher tip opens.
11. Reconnect to the internet and test applicable items in the above list again.

You might encounter issues with Java simulations. If you are having issues with a `.jlnp` file and the developer asks you to check the permissions of the file, then open the file with a text editor and check the permissions. If you are having issues with a `.jar` file and the developer asks you to check the permissions, then use `7-Zip > Open archive > META > MANIFEST > Check permissions` to check the permissions.

If you encounter problems installing a linux installer, it is possible that it is due to the installer being 32-bit and the computer being 64-bit.  If so, follow documentation found in [this issue](https://github.com/phetsims/installer-builder/issues/197).

### 4.7: Automated (Continuous) Testing

Open [this](https://bayes.colorado.edu/continuous-testing/aqua/html/continuous-report.html) in a private window. (You should always use a private window when viewing automated testing results because of caching issues.) Read the description at the top of the page. (The test number can increase because tests aren’t counted until the simulation is built.)

The name of the server that hosts the website for automated testing is called Bayes. Automated testing is commonly referred to as Continuous Testing (CT). When you load the website for automated testing, Bayes is always running tests on simulations in a headless browser, i.e. a browser without a page. Bayes will pick a simulation and a test randomly. Each test gets 40 seconds from start to finish. If the simulation takes 20 seconds to load, then it will only be tested for 20 seconds. If the simulation takes 1 second to load, then it will be tested for 39 seconds. Once every simulation has undergone every test, Bayes does more tests randomly. If someone makes a commit, then Bayes detects the commit, pulls it, and takes a snapshot of the PhET codebase. This is not instantaneous. The creation of a snapshot takes approximately 15 minutes.

The numbers and colors of the cells are important:

* Let *n* be a natural number in one of the cells.
* If *n* = 100, then there are two cases:
  * Case 1: The cell is dark green. This implies that the simulation passed all tests.
  * Case 2: The cell is light green. This implies that the simulation has passed all tests thus far.
* If 0 < *n* < 100, then some tests have failed.
  * If this is the case, then the cell is some shade of orange.
* If *n* = 0, then all tests have failed.
  * If this is the case, then the cell is red.

The color of a named cell corresponds to the color of the cell that was tested most recently in that row. If a cell is outlined, then there are results to see. Click on the cell to view the results.

The following run unit tests. They will always have results. If they do not have results, then you should notify a developer.

* Axon
* All PhET-iO simulations
* Balloons and Static Electricity
* Circuit Construction Kit Common
* Dot
* Kite
* PhET Core
* PhET-iO
* PhET Common
* Query String Machine
* Scenery
* Tandem

There are some common errors you should be aware of. If a simulation does not load in 40 seconds, an error is given. If a window location changes, an error is given. If this occurs frequently, notify a developer. For other errors, make an issue in the appropriate repository with the "type:automated-testing" and "type:bug" labels. Lint errors can be fixed easily!

If Bayes restarts, then it takes the automated testing page a long time to show anything. Similarly, if someone tells Bayes to start or stop doing something, then it takes a long time for things to show up on the automated testing page. In this case, they will show up one at a time.

If you see an error, check GitHub to see who has been comitting to that repository. Notify the developer.

### 4.8: Memory Leak Testing

Memory leak testing is sometimes performed on simulations that are undergoing a development test or a release candidate test. They should also be done for any rc.1 testing. To do a memory leak test, follow these steps:

1. Open an Incognito Window in Google Chrome.
2. Open the simulation.
3. Once the simulation has loaded, open development tools to the “Memory” tab.
4. Take a heap snapshot.
5. Append the URL with `?fuzzMouse`.
6. Have a stopwatch ready for when you reload the simulation with the new query parameter, `?fuzzMouse`.
7. Reload the simulation.
8. Once the simulation gets past the splash screen, start the stopwatch.
9. Every minute, for 10 minutes, take a heap snapshot.
10. While the simulation is paused and the heap snapshot is being taken, pause the stopwatch.
11. Once the simulation resumes, press resume on the stopwatch.
12. After you’ve taken 11 heap snapshots, start taking heap snapshots every 10 to 20 minutes.
13. Stop taking heap snapshots when you feel you have collected sufficient data.

***

## Section 5: Translations

One of PhET’s goals is to make our simulations available to everyone in the world. It wouldn’t be possible to do this without the help of volunteers who translate our simulations and the website.

### 5.1: Legacy Simulation Translations

We have lots of old simulations that use Adobe Flash Player or Java. People still use these translations, so they’re still being translated. To translate a Flash or Java simulation, do the following:

1. Log in to Gmail as phethelp@gmail.com on Hanson.
2. Download all `.xml` (Flash) and `.properties` (Java) files.
3. Move these files to the “Translations” folder.
4. Open [this spreadsheet](https://docs.google.com/spreadsheets/d/10co5pwJI6HaJq6RD7fX2xVm3Ks1WpYfXei9scnPGKxM/edit?pli=1#gid=0).
5. Enter relevant information into the spreadsheet.
6. Open the Git Bash shortcut on Hanson's Desktop.
7. Wait for it to load.
8. Click the “Translations” tab.
9. Click “Deploy Simulation Translations" and read each message that you see after this step carefully.
10. Enter your IdentiKey credentials.
11. Enter the file path for the “Translations” folder.
12. Commit the files that are not updated.
13. Copy and paste the relevant information from the spreadsheet into each commit message.
14. Click the “OK” button.
15. Wait for it to complete.
16. Click the "OK" button. 
17. Copy the URL from Git Bash and paste it into a browser.  URL should look like `https://phet.colorado.edu/admin/deploy-translation?dir=`...
18. Wait for it to load.
19. Test the English version and the translated version of each simulation. (Make sure the strings look normal.)
20. If the strings look normal, then press the "Publish Now" button.
21. Send an email to the translator with a link to the page on the PhET website where their newly translated simulations can be found.
22. Delete the contents of the “Translations” folder.
23. Send the translator a thank-you email.

Note:

* This process will not work if Matt hasn't done some wizardry to make it so that you can do it.
* If something goes wrong at any point in the process, the best course of action is to start over.

### 5.2: HTML5 Simulation Translations

HTML5 simulation translations are submitted to the website by trusted translators. The new translation of the simulation is then automatically uploaded to the website.

Rosetta is the program we use to translate HTML5 simulations. A trusted translator logs in to the website, does all of his or her translations in the browser, and then he or she clicks submit. Rosetta then sends these string files to Babel. Babel then builds a new simulation with the new strings.

### 5.3: Website Translations

#### Update Case

A translator submits an update of an existing translation. Go to the Translations page and 

#### Creates New Language Case
#### Submits New Language Case
#### Delete Case
#### Created Copy Case
#### Submitted Clone Case

***

## Section 6: Maintenance & Management

There are a couple miscellaneous tasks related to maintenance and management that QA gets to deal with.

### 6.1: Testing Matrix Management

Every time we do a release candidate test, you have to make a testing matrix. To do so, follow these steps:

1. If the simulation hasn’t undergone a release candidate test, then you’ll need to create a new testing matrix. Go to Google Drive and then `PhET Files > PhET QA > Testing Matrices` to find example matrices. Make a copy of the correct testing matrix by clicking `File > Make a copy...`. Do not copy and paste the test matrix.
2. Otherwise, create a new tab in the existing spreadsheet for the simulation for the release candidate test.
3. Copy and paste URLs into the testing matrix.
4. Do the “Yes” or “No” for Legends of Learning, Keyboard Navigation. and Screen Reader.
5. Edit the URLs in the GitHub issue.

### 6.2: PhET Test Maintenance

PhET Test is a computer with files on it. As of 2018-05-10, the computer is Turing, a MacBook Pro. Turing is connected to the internet via an ethernet cable. You must be connected to the internet via UCB Wireless or via a virtual private network (VPN) to connect to Turing. The sticky note on Turing has its internet protocol (IP) address and its media access control (MAC) address. PhET Test is used to check master. (Master is the main branch of the software development tree.) PhET Test has caching issues, so always use a private window when accessing PhET Test. If you see something like ”failed to pull,” then look through Turing’s terminal to see if you can find the culprit. Every time a new repository is made, press the “Refresh Perennial” button. (Perennial is the list of simulations.) Press the ”Pull All” button every 5 hours.

Here is a list of helpful commands:

* `$ pm2 stop index-server.js`
* `$ pm2 start index-server.js`
* `$ pm2 logs`

### 6.3: Website Administration

Do not delete English versions of simulations!

There are three servers:

1. [Ox-Dev](https://ox-dev.colorado.edu/): This is the development server. It’s kind of like a playground. You can do whatever you want to the website on this server.
  * Ox-Dev has to be manually synced with the website. (This is not something that you will have to do.)
  * Because Ox-Dev has to be manually synced with the website, it might be missing certain things.
  * Accounts created on Ox-Dev are deleted when Ox-Dev gets synced with the website, so make as many accounts as you’d like.
2. [Bayes](https://bayes.colorado.edu/): This server has multiple functions. It is the disaster recovery server and it does automated testing, among other things.
3. [Figaro](https://phet.colorado.edu/): This server is also known as phet-server. This is the server on which https://phet.colorado.edu runs.

To get to the administrative page of the website, sign in and click the “Administration” button in the upper-right corner.

* “Help Center” is where helpful information that we post on the website is added, removed, or edited.
* “Edit Content Page” is where English strings for the website and the simulations can be edited.
* “Team Page” is where team members and their descriptions can be added, removed, or edited.
* “Asks Data Page” is to be ignored.
* “Simulations” is where flavors, projects, and simulations are listed. Do not click the remove link! Once a simulation is published, ask the relevant designer(s) to fill in the flavor information for that simulation. Each flavor has a checkbox for visibility. Do not check this checkbox without permission from the relevant designer(s).
* “Projects” is the same thing as the list of projects in “Simulations.”
* “Categories” is to be ignored.
* “Activities” is a comprehensive list of activities. It also contains activities that are pending approval.
* To test “Activities,” make all sorts of different files to submit, and submit them. If you aren’t logged in as a team member or if you aren’t an administrator, then you shouldn’t be able to see the activities you’ve submitted. Make sure this is the case. Make sure you can download and use all activities.
* If you are testing “Activities” and you are logged in as a team member, then you should see the red box. If you are testing “Activities” and you are not logged in, you should not see the red box.
* “Notifications” is a list of notifications for updated activities.
* “Users” is where user accounts can be added, removed, or edited.
* “Metadata” is to be ignored.
* “Translations” is for translations.
* “FAQs” is to be ignored.
* “Strings” is to be ignored.
* “Caches and Search Index” is to be ignored.
* “Statistics” is where we record useful statistics.
* “Documentation and Help” is to be ignored.
* “Schools” is where our list of schools maintained.
* “Organizations” is where our list of organizations is maintained.

### 6.4: QA Book Maintenance

Please keep this book up-to-date so that it can be a useful resource!

Use this [Google Document](https://docs.google.com/document/d/18gGQhZNzwEmtQmK3FXK25hu-RQ8lx-H-fVziCCI65Rg/edit) to record things that need to be added and to view dates for scheduled maintenance.

***
